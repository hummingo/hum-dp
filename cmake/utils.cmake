# get sub directory names of input directory
MACRO(GET_SUBDIRECTORY_NAME SRC_DIR DST_DIR)
    FILE(GLOB FILES LIST_DIRECTORY TRUE RELATIVE ${SRC_DIR} ${SRC_DIR}/*)
    SET(DIR_NAMES "")
    FOREACH(ITEM ${FILES})
        IF (IS_DIRECTORY ${SRC_DIR}/${ITEM})
            LIST(APPEND DIR_NAMES ${ITEM})
       ENDIF()
    ENDFOREACH()
    SET(${DST_DIR} ${DIR_NAMES})
ENDMACRO()

# get two layer sub directory names of input directory
MACRO(GET_PATTREN_PATH INPUT_PATH OUTPUT_PATHS)
    SET(PATTREN_CLASSES "")
    GET_SUBDIRECTORY_NAME(${INPUT_PATH} PATTREN_CLASSES)
    FOREACH(CLASS ${PATTREN_CLASSES})
        SET(PATTERN_NAMES "")
        GET_SUBDIRECTORY_NAME(${INPUT_PATH}/${CLASS} PATTERN_NAMES)
        FOREACH(PATTERN ${PATTERN_NAMES})
            LIST(APPEND ${OUTPUT_PATHS} "${CLASS}/${PATTERN}")
        ENDFOREACH()
    ENDFOREACH()
ENDMACRO()